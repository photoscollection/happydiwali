<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Diwali ðŸŽ†</title>
  <style>
    :root{--bg:#0b0312;--card:#0f0b16;--accent:#ffb86b}
    html,body{height:100%;margin:0;font-family:Poppins,Inter,system-ui,Segoe UI,Roboto,Arial;overflow:hidden}
    body{background:radial-gradient(circle at 10% 10%, #1b0026 0%, var(--bg) 40%);color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}
    #three-canvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;}
    .overlay{z-index:1;position:relative;padding:20px;background:rgba(0,0,0,0.5);border-radius:12px;max-width:90vw}
    input[type=text]{width:100%;padding:10px 14px;border-radius:10px;border:none;background:rgba(255,255,255,0.1);color:#fff;font-size:18px;text-align:center;outline:none}
    button{margin-top:10px;padding:10px 20px;border-radius:10px;border:none;background:linear-gradient(90deg,#ffb86b,#ff6b6b);cursor:pointer;font-weight:600;color:#fff;font-size:16px}
    #greetingText{font-size:28px;margin-top:20px;line-height:1.4;animation:fadeIn 1s ease forwards}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>
  <canvas id="three-canvas"></canvas>
  <div class="overlay">
    <input id="name" type="text" placeholder="Enter your name here âœ¨">
    <div>
      <button id="make">Generate Greeting</button>
      <button id="random">Surprise Me</button>
    </div>
    <h2 id="greetingText">Wishing you a bright and joyful Diwali ðŸª”</h2>
  </div>  <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>  <script>
    const greetings = [
      "Happy Diwali, {{name}}! May this festival fill your life with light and success.",
      "Wishing you endless joy, {{name}}. Shine bright like a thousand diyas this Diwali!",
      "{{name}}, may your heart and home sparkle with happiness this Diwali!",
      "Light up your life with love and laughter, {{name}}. Happy Diwali!",
      "May this Diwali bring you closer to your dreams, {{name}}!",
      "{{name}}, let the light of diyas guide you toward prosperity and peace.",
      "Celebrate Diwali with smiles, sweets, and sparkles, {{name}}!",
      "{{name}}, may the firecrackers of happiness light up your sky forever!",
      "Let the glow of diyas remind you that hope always shines, {{name}}!",
      "{{name}}, wishing you a festival full of colors, sweets, and cheer!",
      "This Diwali, let love be your spark and kindness your light, {{name}}!",
      "{{name}}, celebrate the festival of lights with joy and togetherness!",
      "Happy Diwali, {{name}} â€” may your life bloom with endless radiance!",
      "Let the lights of Diwali illuminate your soul, {{name}}!",
      "{{name}}, may each diya you light bring blessings your way!"
    ];

    function hashString(s){let h=5381;for(let i=0;i<s.length;i++)h=((h<<5)+h)+s.charCodeAt(i);return Math.abs(h);}
    function makeGreeting(name){
      name = (name||'Friend').trim();
      const base = greetings[ hashString(name+Date.now().toString().slice(-3)) % greetings.length ];
      return base.replace(/\{\{name\}\}/g, name.charAt(0).toUpperCase()+name.slice(1));
    }

    document.getElementById('make').addEventListener('click',()=>{
      const name=document.getElementById('name').value||'Friend';
      showGreeting(makeGreeting(name));
      launchFireworks();
    });
    document.getElementById('random').addEventListener('click',()=>{
      const randomName=['Amit','Srijan','Ananya','Riya','Rahul','Priya'][Math.floor(Math.random()*6)];
      document.getElementById('name').value=randomName;
      showGreeting(makeGreeting(randomName));
      launchFireworks();
    });

    function showGreeting(text){
      const el=document.getElementById('greetingText');
      el.innerText=text;
      el.style.animation='none';el.offsetHeight;el.style.animation=null;
    }

    // 3D animation with Three.js â€” improved Diwali scene
    const canvas=document.getElementById('three-canvas');
    const renderer=new THREE.WebGLRenderer({canvas,antialias:true,alpha:true});
    renderer.setPixelRatio(window.devicePixelRatio);
    const scene=new THREE.Scene();
    const camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,0.1,100);
    camera.position.set(0,1.5,5);

    const ambient=new THREE.AmbientLight(0xffc1a1,0.5);
    const dir=new THREE.PointLight(0xffd36e,1,100);
    dir.position.set(2,3,2);
    scene.add(ambient,dir);

    const floor=new THREE.Mesh(new THREE.PlaneGeometry(30,30),new THREE.MeshStandardMaterial({color:0x0a0012,roughness:1}));
    floor.rotation.x=-Math.PI/2;scene.add(floor);

    const diyas=[];
    for(let i=0;i<12;i++){
      const group=new THREE.Group();
      const bowl=new THREE.Mesh(new THREE.TorusGeometry(0.35,0.12,12,32,Math.PI*2),new THREE.MeshStandardMaterial({color:0x6b2f1a,metalness:0.3,roughness:0.7}));
      bowl.rotation.x=Math.PI/2;bowl.scale.y=0.6;bowl.position.y=0.05;group.add(bowl);
      const flame=new THREE.Mesh(new THREE.ConeGeometry(0.05,0.2,10),new THREE.MeshBasicMaterial({color:0xffd36e}));
      flame.position.y=0.25;group.add(flame);
      const light=new THREE.PointLight(0xffb86b,1.2,4);light.position.set(0,0.25,0);group.add(light);
      const angle=(i/12)*Math.PI*2;group.position.set(Math.cos(angle)*2,0,Math.sin(angle)*2);scene.add(group);diyas.push(group);
    }

    const particles=new THREE.BufferGeometry();
    const maxP=800;const pos=new Float32Array(maxP*3);
    for(let i=0;i<pos.length;i++)pos[i]=1000;
    particles.setAttribute('position',new THREE.BufferAttribute(pos,3));
    const pMat=new THREE.PointsMaterial({color:0xffffff,size:0.06});
    const pPoints=new THREE.Points(particles,pMat);scene.add(pPoints);

    function launchFireworks(){
      const positions=particles.attributes.position.array;
      for(let i=0;i<maxP;i++){
        const angle=Math.random()*Math.PI*2;
        const y=Math.random()*2+1;
        const r=Math.random()*1.5;
        positions[i*3]=Math.cos(angle)*r;
        positions[i*3+1]=y;
        positions[i*3+2]=Math.sin(angle)*r;
      }
      particles.attributes.position.needsUpdate=true;
    }

    const clock=new THREE.Clock();
    function animate(){
      requestAnimationFrame(animate);
      const t=clock.getElapsedTime();
      diyas.forEach((d,i)=>{
        d.children[1].scale.y=1+Math.sin(t*6+i)*0.2;
      });
      const positions=particles.attributes.position.array;
      for(let i=0;i<maxP;i++){
        if(positions[i*3+1]<900){positions[i*3+1]+=0.02+Math.random()*0.04;if(positions[i*3+1]>4)positions[i*3]=positions[i*3+1]=positions[i*3+2]=1000;}
      }
      particles.attributes.position.needsUpdate=true;
      renderer.render(scene,camera);
    }
    animate();

    function onResize(){
      camera.aspect=window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth,window.innerHeight);
    }
    window.addEventListener('resize',onResize);
    onResize();
  </script></body>
</html>
